{{define "layout"}}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>rclone 同步管理台</title>
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="/static/vendor/layui/css/layui.css">
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <div class="layui-layout layui-layout-admin app-layout">
      <div class="layui-side layui-bg-black app-side">
        <div class="app-brand"><i class="layui-icon layui-icon-transfer" style="margin-right:8px"></i>rclone 同步管理台</div>
        <ul class="layui-nav layui-nav-tree" lay-filter="side-nav">
          <li class="layui-nav-item {{if eq .Active "dashboard"}}layui-this{{end}}"><a href="/">概览</a></li>
          <li class="layui-nav-item {{if eq .Active "remotes"}}layui-this{{end}}"><a href="/remotes">远程列表</a></li>
          <li class="layui-nav-item {{if eq .Active "rules"}}layui-this{{end}}"><a href="/rules">同步规则</a></li>
          <li class="layui-nav-item {{if eq .Active "jobs"}}layui-this{{end}}"><a href="/jobs">任务列表</a></li>
          <li class="layui-nav-item {{if eq .Active "logs"}}layui-this{{end}}"><a href="/logs">日志</a></li>
          <li class="layui-nav-item {{if eq .Active "settings"}}layui-this{{end}}"><a href="/settings">系统设置</a></li>
        </ul>
        <div class="app-hint">
          本地 Web 管理台（默认仅监听 127.0.0.1）。<br>
          支持任意 rclone remote → remote；每个任务独立 RC 端口，统计不会混入系统其他 rclone 任务。
        </div>
      </div>
      <div class="layui-body app-body">
        <div class="app-content">
          {{if not .RcloneInstalled}}
          <div class="layui-elem-quote layui-quote-nm" style="border-left-color:#FF5722">
            <b>未检测到 rclone</b>：请先安装 rclone 并确保在 PATH 中，然后重启本程序。<br>
            Windows 建议用 Scoop/Chocolatey 安装；Linux 可用包管理器或下载官方二进制。
          </div>
          {{else if .RcloneConfigMissing}}
          <div class="layui-elem-quote layui-quote-nm" style="border-left-color:#FFB800">
            <b>rclone 配置文件不可用</b>：{{.RcloneConfigPathDisplay}}（请到「系统设置」里修正路径或留空使用默认配置）
          </div>
          {{end}}
          {{template "content" .}}
        </div>
      </div>
    </div>
    <script src="/static/vendor/layui/layui.js"></script>
    <script>
      layui.use(['element','form'], function(){});
    </script>
  </body>
</html>
{{end}}
